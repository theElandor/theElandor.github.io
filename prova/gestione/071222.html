<!DOCTYPE html>
<head>
<title> <b>Retrieval evaluation, 07/12/22</b> </title>
<meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="generator" content="Org-mode"><meta name="author" content="Matteo Lugli üêÉ">
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
<style>
    .theme-light {
	--color-primary: black;
	--color-background: white;
	--color-text: black;
    }

    .theme-dark {
    
	--color-primary: #23b0ff;
	--color-background: #21202C;
	--color-text: white;
    }
    
    body {
	font-family: 'Fira Code', monospace;
	font-size: 20px;
	background-color: white;
    }

    div#menu {
	position: sticky;
	position: -webkit-sticky;
	top: 5px;
	z-index: 30;
    }

    div#menu button {
	right: 0px;
	position: absolute;
    }
    .src{
        background-color:white;
        color:black;
    }
    p {
	color: var(black);
    }

    h1,h3, h4, h5, a {
	color: var(black);
    }
    h2{
        color:#337ab7;
    }
    h4{
        color:magenta;
    }

    .title{
        text-decoration: underline;
        font-weight:bold;
    }

    nav a {
	color: var(black);
    }

    nav a:hover {
	color: var(black);
	text-decoration: none;
    }

    ul li, ol li {
	color: var(black);
    }

    .collapsible {
        background-color: white;
	border: none;
	text-align: left;
    }
    
    .top-buffer { margin-top: 18px; }

    figcaption { font-size: 15px; }

    footer { 
        text-align: center; 
        background-color: #FFFFEA;
    }

    .observation {
	border-style: solid;
	margin-top: 20px;
	margin-bottom: 20px;
    }

    pre {
	font-size: 20px;
	background-color: black;
	color: white;
	inline-size: 900px;
	overflow: auto;
	word-wrap: normal;
    }
    blockquote {
	border-left: 5px solid var(black);
        background-color: #ffffEA;
        font-size: 20px;
    }
    .MathJax_SVG_Display{
        color:black;
    }

    blockquote p {
	color: var(black);
    }

    /* side-menu stuff */
    .side-menu {
	position: fixed;
	left: 0;
	width: 60px;
	height: 100%;
	z-index: 100;
    }

    .side-menu-content {
	display: none;
	position: absolute;
	top: 60px;
	left: 0px;
	height: 100%;
	/* background-color: var(black); */
	z-index: 100;	
    }

    .side-menu-content ul {
	list-style-type: none;
	position: relative;
	margin-left: 5px;
	width: 100%;
	padding-left: 0px;
    }

    .side-menu-content ul li {
	position: relative;
	padding-top: 5px;
	font-size: 15px;
	padding-left: 0px;
    }

    .side-menu-content ul li a {
	color: var(black);
	text-decoration: none;
	font-weight: bold;
    }

    .toggle {
	position: absolute;
	display: block;
	top: 0;
	left: 0;
	width: 80px;
	height: 60px;
	background: var(white);
    }

    .toggle:hover {
	background: var(black);
    }

    .toggle:before {
	content: '\f0c9';
	font-family: fontAwesome;
	position: absolute;
	width: 100%;
	height: 100%;
	line-height: 60px;
	text-align: center;
	font-size: 24px;
	color: var(black);
    }

    @media (max-width: 1024px) {
	pre {
	    inline-size: 600px;
	}
    }

    @media (max-width: 576px) {
	* {
	    font-size: 10px;
	}

	h1 {
	    font-size: 13px;           
	}

	h2, h3, h4, h5 {
	    font-size: 12px;
	}

	blockquote {
	    font-size: 15px;
	}

	pre, li pre {
	    font-size: 10px;
	    color: white;
	    inline-size: 300px;
	    word-wrap: normal;
	    overflow: auto;
	}

        li pre {
	    inline-size: 250px;
        }

	.toggle {
	    width: 30px;
	}

	.toggle:before {
	    content: '\f0c9';
	    font-family: fontAwesome;
	    position: absolute;
	    width: 100%;
	    height: 100%;
	    line-height: 60px;
	    text-align: center;
	    font-size: 12px;
	    color: var(black);
	}	
    }


</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">

<div class="row top-buffer"> </div>

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><h1 class="title"><b>Retrieval evaluation, 07/12/22</b></h1>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><hr style="border: 1px solid #FFFFFF" />   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-" style="text-decoration: underline">  Info &triangledown;</h2>
</button><div class='sec- collapsible-content'>
<p>
Appunti della lezione in presenza del 7/12/22.
</p>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-1" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-1" style="text-decoration: underline"> 1 Introduzione &triangledown;</h2>
</button><div class='sec-1 collapsible-content'>
<p>
Se solitamente si parla di <b>efficienza</b> nell'ottenere dei risultati, 
nell'information retrieval bisogna principalmente valutare <b>l'efficacia</b>
del programma, per cercare di capire se i risultati soddisfano le richieste.
Questo si traduce nella misurazione della "felicit√†" dell'utente.
</p>
<ul class="org-ul">
<li><p>
<b>Web-engine</b>: se l'utente trova quello che cerca, in un contesto general-purpose;
</p>
</li>
<li><p>
<b>E-commerce</b>: in un sistema di e-commerce, se il venditore riesce a vendere i propri prodotti;
</p>
</li>
<li><p>
<b>Enterprise</b>: principalmente si misura la velocit√† con cui si ottiene un documento;
</p>
</li>
</ul>
<p>
In generale quindi la misura dipende dal contesto.
Per misurare la rilevanza servono:
</p>
<ol class="org-ol">
<li><p>
Una o pi√π <b>user information need</b>, come ad esempio:
</p>
<blockquote>
<p>
I'm looking for information on
whether drinking red wine is more effective at reducing
your risk of heart attacks than white wine.
</p>
</blockquote>
</li>
<li><p>
Una suite di query di benchmark;
</p>
</li>
<li><p>
Dei documenti di benchmark;
</p>
</li>
<li><p>
Aver assegnato ad ogni documento una label "rilevante" o
"non rilevante" rispetto ad ogni query;
</p>
</li>
</ol>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-2" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-2" style="text-decoration: underline"> 2 Effectivness &triangledown;</h2>
</button><div id="outline-container-sec-2-1" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-2-1" nil> 2.1 Recall and Precision &triangledown;</h3>
</button><div class='sec-2-1 collapsible-content'>
<ul class="org-ul">
<li><p>
R: set di documenti rilevanti a priori;
</p>
</li>
<li><p>
A: documenti ritornati;
</p>
</li>
<li><p>
RA: intersezione tra R e A
</p>
</li>
</ul>

<p>
Due parametri:
</p>
<ol class="org-ol">
<li><p>
<b>Recall</b>: \(\frac{|RA|}{|R|}\) \(\rightarrow\) quanti documenti rilevanti sono stati effettivamente restituiti;
</p>
</li>
<li><p>
<b>Precision</b>: \(\frac{|RA|}{|A|}\) \(\rightarrow\) tra i documenti ritornati, quanti documenti erano effettivamente rilevanti.
</p>
</li>
</ol>
<p>
La <i>precision</i> e la <i>recall</i> sono tendenzialmente <b>inversamente proporzionali</b>;
</p>

<p>
Si consideri il seguente esempio:

<div class="row top-buffer"> </div>
<img src="./a3.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

Intuitivamente, per aumentare la <i>precision</i> dovrei diminuire il numero di documenti ritornati, 
ma facendo ci√≤ probabilmente si tagliano fuori anche documenti rilevanti, quindi diminuisce la recall. 
</p>
<ul class="org-ul">
<li><p>
<b>recall</b> \(\rightarrow\) quanti documenti rilevanti riesco a "richiamare";
</p>
</li>
<li><p>
<b>precision</b> \(\rightarrow\) quanto riesco a essere preciso sul mio output, senza sporcarlo con documenti non rilevanti;
</p>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-2-2" nil> 2.2 Il concetto di Ranking &triangledown;</h3>
</button><div class='sec-2-2 collapsible-content'>
<p>
Bisogna anche valutare l'<b>ordinamento</b> che viene fatto in base all'esigenza
iniziale. Ricordiamo che pi√π risultati vengono mostrati nel ranking, pi√π
aumenta la <b>recall</b>.
L'idea per la valutazione dell'ordinamento √® "fissare" 11 <b>recall points</b> 
dove viene misurata la <i>precision</i>.
Per esempio, per avere un <i>recall</i> del 20%, 2 sui 10 documenti
rilevanti devono essere presenti nel ranking. Per includerli, devono
essere mostrati i primi 3 documenti.
</p>

<p>

<div class="row top-buffer"> </div>
<img src="./a1.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<p>
dato il numero limitato di recall points, si usa un metodo di interpolazione
per determinare altri livelli di precisione:
</p>
\begin{equation}
P(R_{j}) = max_{r_{j} \leq r \leq r_{j+1}}P(r)
\end{equation}

<p>
In questo modo si riescono a comparare query per cui il numero di documenti
rilevanti a priori √® diverso. Infatti basta definire dei punti di recall <b>standard</b>
(10%, 20%, ...100%) i quali potrebbero anche <i>non essere utili per una determinata query</i>
(si pensi ad una query per cui si sono definiti 3 documenti rilevanti:
senza un metodo di approssimazione non si riuscirebbe a definire una precision per un recall point
come 50%, che rappresenterebbero un set di risultati contenente 1 documento rilevante e mezzo.)
</p>

<p>
Se si plottasse la tabella sopra, si riuscirebbe a vedere l'andamento della precisione all'aumentare
della percentuale di documenti rilevanti che vogliamo che siano ritornati. Ovviamente l'ideale
sarebbe mantenere questa curva il pi√π in alto possibile.
</p>
</div>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-3" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-3" style="text-decoration: underline"> 3 Metodi di Ranking &triangledown;</h2>
</button><div id="outline-container-sec-3-1" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-3-1" nil> 3.1 Average Precision &triangledown;</h3>
</button><div class='sec-3-1 collapsible-content'>
<blockquote>
<p>
Precisione media su pi√π query, per ogni livello di recall.
Tengo fermo un livello di recall, scorro le query (facendo la media delle precision).
</p>
</blockquote>

<p>
Ovviamente la cosa giusta da fare √® calcolare l'<b>average precision</b> <i>a ogni livello di recall</i> 
per un'<i>insieme</i> di query.
</p>
\begin{equation}
\bar{P}(r) = \sum_{i=1}^{N_{q}}{\frac{P_{i}(r)}{N_{q}}}
\end{equation}
<p>
Quindi per ogni recall level si ottiene una <b>average precision</b>.
Per capire quindi come il sistema performa <i>in generale</i>, si 
fa un plotting <b>average precision</b> / <b>recall</b>.
</p>

<p>
Ovviamente si cerca di ottenere una curva pi√π "alta" possibile.

<div class="row top-buffer"> </div>
<img src="./a2.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<p>
I vantaggi principali di questo metodo sono la sua semplicit√† e 
la visione d'insieme che viene data sulla "performance" del sistema.
E' utile avere una <b>singola curva</b> come metro di valutazione.
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-3-2" nil> 3.2 Single Precision Value &triangledown;</h3>
</button><div class='sec-3-2 collapsible-content'>
<blockquote>
<p>
Tengo ferma una query, scorro i livelli di recall (facendo la media).
I valori di recall pi√π sensati da avere sono \(i/|Rq|\), dove \(i\)
scorre sul numero di documenti rilevanti per quella determinata query.
</p>
</blockquote>
<p>
Un'altro metodo di valutare un sistema √® quello di limitarsi 
all'analisi delle query <b>separatamente</b>, in modo da limitare
l'impatto di valori fuori curva. Il procedimento da seguire
√® il seguente:
</p>
<ol class="org-ol">
<li><p>
Si fissa una query \(q\);
</p>
</li>
<li><p>
Per ogni livello di recall, si applica la query ottenendo un valore di <b>precision</b>
(interpolato, dato che si usano gli <i>standard recall levels</i> );
</p>
</li>
<li><p>
Si fa la media di tutti i valori ottenuti;
</p>
</li>
</ol>
\begin{equation}
IAP = \sum_{r = 0}^{n}{\frac{P_{q}(r)}{n}}
\end{equation}
<p>
Dove IAP sta per <b>Interpolated Average Precision</b>.
Altrimenti se non si vogliono usare gli <i>standard recall levels</i> per ottenere
una misura pi√π "ad hoc" per la query, si usa questa formula:
</p>
\begin{equation}
NIAP = \sum_{r = 0}^{n}{\frac{P_{q}(r/R_{q})}{|R_{q}|}}
\end{equation}
<p>
Dove NIAP sta per <b>Non-Interpolated Average Precision</b>.
Queste misure favoriscono sistemi che restituiscono documenti rilevanti "velocemente".
</p>
</div>
<div id="outline-container-sec-3-2-1" class="outline-4"><button type="button" class="collapsible">
<h4 id="sec-3-2-1" nil> 3.2.1 Esempio (NIAP, "ad hoc" recall levels) &triangledown;</h4>
</button><div class='sec-3-2-1 collapsible-content'>
<p>

<div class="row top-buffer"> </div>
<img src="./b1.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

Ovviamente il primo ranking √® preferibile, dato che mostra subito 
pi√π documenti rilevanti. Si vede anche dal livello di precisione media,
che √® maggiore nel primo ranking che nel secondo.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-3-3" nil> 3.3 Min Average Precision (MAP) &triangledown;</h3>
</button><div class='sec-3-3 collapsible-content'>
<p>
Semplicemente si calcola la media per le varie Single Precision Value
ottenuti dalle varie query. E' quindi una <i>media delle medie</i>.
E' sicuramente una delle misure pi√π utilizzate
</p>
</div>
<div id="outline-container-sec-3-3-1" class="outline-4"><button type="button" class="collapsible">
<h4 id="sec-3-3-1" nil> 3.3.1 Esempio &triangledown;</h4>
</button><div class='sec-3-3-1 collapsible-content'>
<p>

<div class="row top-buffer"> </div>
<img src="./b2.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

Da questi dati si potrebbe analizzare meglio il processing della seconda
query per cercare di aumentare la MAP.
Tuttavia considerare la rilevanza come un parametro binario √® un'approccio semplicistico 
in un contesto reale.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-3-4" nil> 3.4 R-Precision &triangledown;</h3>
</button><div class='sec-3-4 collapsible-content'>
<blockquote>
<p>
Calcolo quanti documenti rilevanti ho restituito rispetto al caso ideale
in cui nei primi \(n\) documenti ho restituito tutti ed \(n\) i documenti rilevanti.
</p>
</blockquote>
<p>
Si basa su una singola query e restituisce un singolo valore.
E' un metodo molto semplice dato che <b>non usa la recall</b>.
Semplicemente: 
</p>
<ol class="org-ol">
<li><p>
Si applica la query, ottenendo un ranking dei documenti;
</p>
</li>
<li><p>
Si supponga che il pool di documenti rilevanti a priori 
per quella query contenga \(n\) documenti;
</p>
</li>
<li><p>
Si divide il numero di documenti <b>rilevanti</b> nei primi \(n\)
( all'interno del ranking) per \(n\).
</p>
</li>
</ol>

<p>
Per vedere a occhio quale sistema funziona meglio con la query
\(i\): 
</p>
\begin{equation}
RP_{A/B}(i) = RP_{A}(i) - RP_{B}(i)
\end{equation}

<p>

<div class="row top-buffer"> </div>
<img src="./b3.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>
</div>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->


<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-4" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-4" style="text-decoration: underline"> 4 Limiti dei metodi &triangledown;</h2>
</button><div class='sec-4 collapsible-content'>
<ul class="org-ul">
<li><p>
Possibile <b>assenza di benchmark</b>, ma anche la sua costruzione
costituisce un problema a parte ( i documenti vanno anche supervisionati
dal programmatore/o da un responsabile)
</p>
</li>
</ul>
<ul class="org-ul">
<li><p>
<b>Recall</b> e <b>Precision</b> sono soltanto una piccola parte di tutto
ci√≤ che concerne un sistema di information retrieval, andrebbero
considerati molti pi√π parametri.
</p>
</li>
<li><p>
Per alcuni sistemi il meccanismo pi√π indicato non √® l'ordinamento <b>totale</b>,
ma un'ordinamento <b>parziale</b> dei risultati: in questo caso precision e 
recall risultano non adeguate.
Questo pu√≤ capitare se si sta facendo un ranking considerando molti parametri,
e il sistema non sa quale parametro ha "pi√π peso" rispetto agli altri.
Esempio: <a href="https://www.booking.com/">booking</a> chiede all'utente "rispetto a cosa" effettuare l'ordinamento dei
risultati (prezzo, vicinanza al centro, presenza/assenza wifi, recensioni, ecc...).
</p>

<p>
Infatti <i>recall</i> e <i>precision</i> si basano sul sapere la "rilevanza" di un oggetto. 
In casi complessi, non posso avere direttamente questa informazione, devo chiedermi
"rilevante rispetto a cosa?" \(\rightarrow\) pi√π parametri potrebbero influire sulla
rilevanza!
</p>
</li>
</ul>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-5" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-5" style="text-decoration: underline"> 5 Misure alternative &triangledown;</h2>
</button><div id="outline-container-sec-5-1" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-5-1" nil> 5.1 Media armonica &triangledown;</h3>
</button><div class='sec-5-1 collapsible-content'>
<blockquote>
<p>
La media armonica ha un valore alto se entrambi i valori hanno un valore alto.
Deve esserci "armonia" tra i due valori.
</p>
</blockquote>
<p>
Misura che dato un risultato di una query, combina direttamente
precision e recall per ottenere un'unico valore.
</p>

\begin{equation}
\frac{2*prec*call}{prec+recall}
\end{equation}
</div>
</div>
<div id="outline-container-sec-5-2" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-5-2" nil> 5.2 E-measure &triangledown;</h3>
</button><div class='sec-5-2 collapsible-content'>
\begin{equation}
E = 1-\frac{1+b^2}{\frac{b^2}{recall}+\frac{1}{prec}}
\end{equation}
<ul class="org-ul">
<li><p>
se b == 1 allora √® il <i>complementare</i> della media armonica; 
</p>
</li>
<li><p>
se b>1 si infatizza la precision;
</p>
</li>
<li><p>
se b<1 si infatizza la recall;
</p>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5-3" class="outline-3"><button type="button" class="collapsible">
<h3 id="sec-5-3" nil> 5.3 <b>Discounted Cumulative Gain</b> &triangledown;</h3>
</button><div class='sec-5-3 collapsible-content'>
<p>
 Dato un pool iniziale di documenti, l'utente assegna ad ognuno un certo
punteggio discreto ( da 0 a 3) in base all'"utilit√†" del documento rispetto
ad una determinata query.
Dopo aver fatto ci√≤, la query viene applicata e viene ritornato un ranking.
L'idea del DCG √® quella di dare pi√π peso ai documenti che appaiono <b>pi√π in alto</b>
nel raking: 
</p>
\begin{equation}
DCG_{p} = rel_{1} + \sum^{p}_{i=2}{\frac{rel_{i}}{\log_{2}{i}}}
\end{equation}
<ul class="org-ul">
<li><p>
<b>N.B</b>: il primo elemento viene escluso dalla sommatoria dato che verrebbe
diviso per 0.
</p>
</li>
</ul>
<p>
Gli evidenti problemi di questo tipo di valutazione sono l'inefficienza e tal volta
inefficacia dei giudizi umani, che richiedono anche molto tempo.
</p>

<p>
Con la formula standard riportata sopra, per i == 2 il denominatore all'interno della
sommatoria vale 1, perci√≤ il secondo elemento nel ranking ha la stessa rilevanza del 
primo. Questa pu√≤ essere vista come una "feature" o come un "bug", dipende dal contesto.
</p>
</div>
<div id="outline-container-sec-5-3-1" class="outline-4"><button type="button" class="collapsible">
<h4 id="sec-5-3-1" nil> 5.3.1 Normalized DCG &triangledown;</h4>
</button><div class='sec-5-3-1 collapsible-content'>
<p>
Nella versione normalizzata della formula, il punteggio di DCG di ogni query
viene diviso per il punteggio "ideale", ossia quello in cui i valori di DCG 
sono in ordine decrescente nel ranking.
</p>
</div>
</div>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-6" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-6" style="text-decoration: underline"> 6 Presentazione dei risultati &triangledown;</h2>
</button><div class='sec-6 collapsible-content'>
<p>
I risultati del ranking vengono solitamente "estesi" con dei metadati aggiuntivi, 
per dare all'utente un'idea iniziale del documento a prima vista. Esistono 2
metodi per effettuare questa operazione:
</p>
<ul class="org-ul">
<li><p>
<b>Static summary (<i>query indipendent</i>)</b>: i "metadati" di ogni documento sono sempre gli stessi,
indipendentemente dalla query.
Lo static summary di un documento potrebbe essere:
</p>
<ul class="org-ul">
<li><p>
le prime <b>50 parole</b> del contenuto;
</p>
</li>
<li><p>
una serie di <b>keywords</b> calcolate in vari modi; 
</p>
</li>
<li><p>
un riassunto generato da algoritmi di <b>machine learning</b>;
</p>
</li>
</ul>
</li>
<li><p>
<b>Dynamic summary (<i>query dipendent</i>)</b>: le informazioni aggiuntive mostrate dipendono
dalla query, vengono calcolate in modo dinamico. Si cerca di far capire
all'utente <i>per quale motivo</i> quel particolare documento √® rilevante
per la sua query.
L'idea √® che questi <i>snippet</i> devono essere concisi, semplici, e rilevanti
per poter rispondere in poche parole alla query dell'utente.
Si preferiscono snippet che <b>contengono i termini della query in una frase concisa</b>.
</p>
</li>
</ul>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><hr style="border: 1px solid #FFFFFF" />   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><footer id="postamble">
<div>
<p class="author"><b>Author</b>: Matteo Lugli üêÉ</p><p class="email"><b>Email</b>: <a href="mailto:matteolugli18@gmail.com">matteolugli18@gmail.com</a></p><p class="date"><b>Created</b>: 2023-06-10 sab 15:04</p>
</div>
</footer>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>
<script>

      function set_sections() {
	// -- Deal with the hiding/showing of the various sections
	var buttons = document.getElementsByClassName('collapsible');

	for (var i = 0; i < buttons.length; i++) {
	  buttons[i].addEventListener('click', function() {
	    var content = this.parentElement;
	    divs = content.getElementsByTagName('div');
	    for (var j = 0; j < divs.length; j++) {
	      if (divs[j].style.display === '' || divs[j].style.display === 'block') {
		divs[j].style.display = 'none';
	      } else {
		divs[j].style.display = 'block';
	      }
	    }
	  });
	}
      }

      function hide_sections() {
	// -- Deal with the hiding/showing of the various sections
	var buttons = document.getElementsByClassName('collapsible');
	var sections_to_not_hide = ['Lecture Info', 'Overview', 'Basic Info', 'Informazioni Lezione', 'Table of Contents', 'Informazioni', 'Lecture Summary']

	for (var i = 0; i < buttons.length; i++) {
	  // -- Check which sections to hide initially
	  html_elem = buttons[i].getElementsByTagName('h2').length > 0 ?
	    buttons[i].getElementsByTagName('h2')[0] :
	    buttons[i].getElementsByTagName('h3').length > 0 ?
	    buttons[i].getElementsByTagName('h3')[0] :
	    buttons[i].getElementsByTagName('h4')[0];

	  var hide_section = true;

	  for (var h = 0; h < sections_to_not_hide.length; h++) {
	    if (html_elem.innerHTML.includes(sections_to_not_hide[h])) {
	      hide_section = false;
	    }
	  }

	  if (hide_section) {
	    divs = buttons[i].parentElement.getElementsByTagName('div');

	    for (var j = 0; j < divs.length; j++) {
	      divs[j].style.display =
		divs[j].style.display === '' || divs[j].style.display === 'block' ?
		divs[j].style.display = 'none' :
		divs[j].style.display = 'block';
	    }
	  }    
	}
      }

      // ---------------------------

      // function to set a given theme/color-scheme
      function setTheme(themeName) {
        localStorage.setItem('theme', themeName);
        document.documentElement.className = themeName;
      }

      // function to toggle between light and dark theme
      function toggleTheme() {
        if (localStorage.getItem('theme') === 'theme-dark') {
          setTheme('theme-light');
        } else {
          setTheme('theme-dark');
        }
      }

      // Immediately invoked function to set the theme on initial load
      (function () {
        if (localStorage.getItem('theme') === 'theme-light') {
          setTheme('theme-light');
        } else {
          setTheme('theme-dark');
        }
      })();
      

      // ---------------------------

      // toggle menu
      var menu_off = 1
      
      function toggleMenu() {
	let menu = document.querySelector('.side-menu');
	let menu_list = document.querySelector('.side-menu-content');
	let toggle = document.querySelector('.toggle');

	let inactive_color = getComputedStyle(document.body)
	    .getPropertyValue('--color-background');

	let active_color = getComputedStyle(document.body)
	    .getPropertyValue('--color-primary');	
		
	if (menu_off) {
	  // activate menu
	  toggle.style.backgroundColor = active_color;
	  menu.style.width = '170px';
	  menu_list.style.display = 'block';
	  menu_off = 0;
	} else {
	  // de-activate menu
	  toggle.style.backgroundColor = inactive_color;
	  menu.style.width = '60px';	  
	  menu_list.style.display = 'none';
	  menu_off = 1;
	}
      }

set_sections();
hide_sections();
</script>
</div>
</body>
</html>
