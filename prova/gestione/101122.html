<!DOCTYPE html>
<head>
<title> <b>Modello probabilistico 10-11-22</b> </title>
<meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="generator" content="Org-mode"><meta name="author" content="Matteo Lugli üêÉ">
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
<style>
    .theme-light {
	--color-primary: black;
	--color-background: white;
	--color-text: black;
    }

    .theme-dark {
    
	--color-primary: #23b0ff;
	--color-background: #21202C;
	--color-text: white;
    }
    
    body {
	font-family: 'Fira Code', monospace;
	font-size: 20px;
	background-color: white;
    }

    div#menu {
	position: sticky;
	position: -webkit-sticky;
	top: 5px;
	z-index: 30;
    }

    div#menu button {
	right: 0px;
	position: absolute;
    }
    .src{
        background-color:white;
        color:black;
    }
    p {
	color: var(black);
    }

    h1,h3, h4, h5, a {
	color: var(black);
    }
    h2{
        color:#337ab7;
    }
    h4{
        color:magenta;
    }

    .title{
        text-decoration: underline;
        font-weight:bold;
    }

    nav a {
	color: var(black);
    }

    nav a:hover {
	color: var(black);
	text-decoration: none;
    }

    ul li, ol li {
	color: var(black);
    }

    .collapsible {
        background-color: white;
	border: none;
	text-align: left;
    }
    
    .top-buffer { margin-top: 18px; }

    figcaption { font-size: 15px; }

    footer { 
        text-align: center; 
        background-color: #FFFFEA;
    }

    .observation {
	border-style: solid;
	margin-top: 20px;
	margin-bottom: 20px;
    }

    pre {
	font-size: 20px;
	background-color: black;
	color: white;
	inline-size: 900px;
	overflow: auto;
	word-wrap: normal;
    }
    blockquote {
	border-left: 5px solid var(black);
        background-color: #ffffEA;
        font-size: 20px;
    }
    .MathJax_SVG_Display{
        color:black;
    }

    blockquote p {
	color: var(black);
    }

    /* side-menu stuff */
    .side-menu {
	position: fixed;
	left: 0;
	width: 60px;
	height: 100%;
	z-index: 100;
    }

    .side-menu-content {
	display: none;
	position: absolute;
	top: 60px;
	left: 0px;
	height: 100%;
	/* background-color: var(black); */
	z-index: 100;	
    }

    .side-menu-content ul {
	list-style-type: none;
	position: relative;
	margin-left: 5px;
	width: 100%;
	padding-left: 0px;
    }

    .side-menu-content ul li {
	position: relative;
	padding-top: 5px;
	font-size: 15px;
	padding-left: 0px;
    }

    .side-menu-content ul li a {
	color: var(black);
	text-decoration: none;
	font-weight: bold;
    }

    .toggle {
	position: absolute;
	display: block;
	top: 0;
	left: 0;
	width: 80px;
	height: 60px;
	background: var(white);
    }

    .toggle:hover {
	background: var(black);
    }

    .toggle:before {
	content: '\f0c9';
	font-family: fontAwesome;
	position: absolute;
	width: 100%;
	height: 100%;
	line-height: 60px;
	text-align: center;
	font-size: 24px;
	color: var(black);
    }

    @media (max-width: 1024px) {
	pre {
	    inline-size: 600px;
	}
    }

    @media (max-width: 576px) {
	* {
	    font-size: 10px;
	}

	h1 {
	    font-size: 13px;           
	}

	h2, h3, h4, h5 {
	    font-size: 12px;
	}

	blockquote {
	    font-size: 15px;
	}

	pre, li pre {
	    font-size: 10px;
	    color: white;
	    inline-size: 300px;
	    word-wrap: normal;
	    overflow: auto;
	}

        li pre {
	    inline-size: 250px;
        }

	.toggle {
	    width: 30px;
	}

	.toggle:before {
	    content: '\f0c9';
	    font-family: fontAwesome;
	    position: absolute;
	    width: 100%;
	    height: 100%;
	    line-height: 60px;
	    text-align: center;
	    font-size: 12px;
	    color: var(black);
	}	
    }


</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">

<div class="row top-buffer"> </div>

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><h1 class="title"><b>Modello probabilistico 10-11-22</b></h1>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><hr style="border: 1px solid #FFFFFF" />   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-1" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-1" style="text-decoration: underline"> 1 Introduzione &triangledown;</h2>
</button><div class='sec-1 collapsible-content'>
<p>
L'idea che sta alla base del Modello Probabilistico √®
il determinare <b>la probabilit√† che un documento sia rilevante</b>
rispetto ad una query fornita dall'utente.
Si usano quindi dei tools statistici per effettuare delle <b>stime</b> 
e delle <b>ipotesi</b>.
In particolare, definiamo la seguente <b>variabile aleatoria</b>:
</p>
\begin{align}
& R_{d,q} = 1 \textrm{ se il documento d √® rilevante per la query q} \\
& R_{d,q} = 0 \textrm{ otherwise}
\end{align}

<p>
In particolare, lo scopo √® quello di <b>ordinare</b> i documenti
secondo la loro <b>probabilit√† di rilevanza</b>, quindi secondo
la probabilit√† che \(R_{d,q}\) sia = 1.
</p>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-2" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-2" style="text-decoration: underline"> 2 BIM in theory (1/2) &triangledown;</h2>
</button><div class='sec-2 collapsible-content'>
<p>
Il <i>BIM (Binary Indipendence Model)</i> √® un modello probabilistico che si basa su due elementi:
</p>
<ul class="org-ul">
<li><p>
L'<b>indipendenza</b> dei termini, quindi l'assenza della semantica;
</p>
</li>
<li><p>
L'<b>assenza di pesi reali</b>: semplicemente un termine pu√≤ essere presente
o meno all'interno di una query/documento.
Quindi la rappresentazione logica di un documento \(j\) √®
questa: 
</p>
</li>
</ul>
\begin{equation}
d_{j} = \{w_{1j},w_{2j},...,w_{tj}\}
\end{equation}
<p>
Il tutto si basa sul <b>Probabilistic Ranking Principle (PRP)</b> \(\Downarrow\)
</p>
<blockquote>
<p>
Se i documenti vengono ordinati efficacemente in base
alla loro probabilit√† di rilevanza, allora l'efficienza
del sistema √® la migliore ottenibile.
</p>
</blockquote>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-3" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-3" style="text-decoration: underline"> 3 BIM in practice (2/2) &triangledown;</h2>
</button><div class='sec-3 collapsible-content'>
<p>
E' necessario qundi definire una <b>funzione</b> che possa
essere usata per ottenere i valori che poi andranno
ordinati per stilare un <b>ranking dei documenti per probabilit√† di rilevanza</b>.
Usiamo la <b>similarit√†</b>:
</p>
\begin{equation}
sim(d_{j}, q) = \frac{\overbrace{P(R|\vec{d}_{j},\vec{q})}^\text{p. che il doc. sia rilevante per la query}}{\underbrace{P(\bar{R}|\vec{d}_{j}, \vec{q})}_\text{p. che il doc NON sia rilevante per la query}}
\end{equation}
<p>
Applicando la <b>regola di Bayes</b> \(\Rightarrow P(A|B)P(B) = P(B|A)P(A)\)
</p>


\begin{equation}
 \frac{\overbrace{P(\vec{d}_{j}|R,\vec{q})}^\text{p. di scegliere il doc. dal pool di doc.rilevanti R} \times P(R|\vec{q})}{\overbrace{P(\vec{d}_{j}|\bar{R},\vec{q})}^\text{p. di scegliere il doc. dal pool di doc. NON rilevanti} \times P(\bar{R}|\vec{q})}
\end{equation}

<p>
Dato che non si hanno informazioni a priori e che non influsicono sul ranking, i due termini
a destra al numeratore e al denominatore possono essere semplificati.
</p>

<p>
Ora riscriviamo il numeratore e il denominatore, considerando che <i>un documento
in realt√† √® rappresentato come vettore di pesi binari</i>.
</p>

<p>
Ci√≤ significa che preso un documento dall'insieme di documenti rilevanti
R, esso √® proprio \(d_{j}\) se contiene tutti i termini presenti (\(w_{i,j} = 1\)) in \(d_{j}\) e NON contiene
tutti i termini assenti (\(w_{i,j} = 0\)) in \(d_{j}\). Il ragionamento
√® analogo per il denominatore.
</p>

<p>

<div class="row top-buffer"> </div>
<img src="./bim1.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<p>
Ora, considerando la complementariet√† delle probabilit√† e applicando la funzione logaritmo, si pu√≤ riscrivere la formula come
</p>

<p>

<div class="row top-buffer"> </div>
<img src="./bim2.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<p>
Si √® essenzialmente portata fuori la produttoria, iterando su tutti i 
termini indistintamente. In questo modo, quando il termine √® presente (\(w_{i,j} = 1\)) allora si considera
solo la prima parte elevata alla \(w_{ij}\), dato che la seconda parentesi sar√† elevata alla 0 quindi varr√† 1.
Al contrario,  quando il termine NON √® presente (\(1 - w_{i,j} = 1\)) allora
alla produttoria contribuisce solo la seconda parentesi, elevata alla 1.
</p>

<p>
Si riscrive poi la formula usando le propriet√† dei logaritmi.
Si ottiene la seguente forma

<div class="row top-buffer"> </div>
<img src="./bim3.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<p>
Tramite questi passaggi intermedio:
</p>

\begin{equation}
\sum_{i=1}^t (w_{ij}log(...)+log(...)-w_{ij}log(...))
\end{equation}

<p>
si elimina il logaritmo centrale, essendo costante e si raccoglie \(w_{ij}\) 
</p>

\begin{equation}
\sum_{i=1}^{t} (w_{ij} (\log(...) - log(...)))
\end{equation}

<p>
si usano le propriet√† dei logaritmi (differenza di logaritmi con base uguale) e si ottiene 
la prima delle due forme in figura.
Si moltiplica ad ogni iterazione per \(w_{iq}\), dato che si vogliono
considerare soltanto i termini presenti anche nella query.
Infine si usano ancora una volta le propriet√† dei logaritmi per
la seconda delle due forme in figura.
</p>

<p>
Consideriamo ora la costante \(c_{i}\):
</p>

<p>

<div class="row top-buffer"> </div>
<img src="./bim4.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>

<ul class="org-ul">
<li><p>
\(c_{i} = 0\) se un termine ha probabilit√† uguali di apparire in documenti
rilevanti e non rilevanti;
</p>
</li>
<li><p>
\(c_{i} > 0\) se appare pi√π probabilmente in documenti rilevanti;
</p>
</li>
</ul>

<p>
Quindi essenzialmente per ogni documento <b>si fa la sommatoria dei \(c_{i}\) per ogni termine \(i\) presente sia nel documento che nella query</b>.
</p>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-4" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-4" style="text-decoration: underline"> 4 Esempio &triangledown;</h2>
</button><div class='sec-4 collapsible-content'>
<p>
Prima di procedere con un'esempio di applicazione, c'√® una nota da fare sulla <b>probabilit√† iniziale</b>.
Infatti inizialmente non si conosce il pool R di documenti
rilevanti per la query inserita dall'utente.
Serve quindi un modo alternativo per calcolare i due termini
fondamentali della formula, ossia \(P(k_{i}|\bar{R},\vec{q})\) e
\(P(k_{i}|{R},\vec{q})\)
</p>

<p>
Si fa quindi un'assunzione iniziale: si suppone che i documenti
rilevanti siano una piccola percentuale del pool totale, stabilendo che:
</p>
<ul class="org-ul">
<li><p>
\(P(k_{i}|R,\vec{q})\) = 0.5;
</p>
</li>
<li><p>
\(P(k_{i}|\bar{R},\vec{q})\) = \(\frac{n_{i}}{N}\), si sono semplificati \(V_{i}\) e \(V\), essendo piccoli;
</p>
</li>
</ul>
<p>
Dopo aver fatto ci√≤ si applicano le procedure viste, e si ottiene
un <b>ranking iniziale</b> dei documenti.
Si prendono i primi \(V\) documenti e si considerano come pool di documenti rilevanti.
</p>

<p>
\(n_{i}\) √® il numero di documenti che contengono il termine \(k_{i}\).
A questo punto si hanno tutti gli elementi della formula:
</p>
<ul class="org-ul">
<li><p>
\(P(k_{i}|R,\vec{q})\) = \(\frac{V_{i}}{V}\), dove \(V_{i}\) √® il subset di V che contiene
l'index term \(k_{i}\);
</p>
</li>
<li><p>
\(P(k_{i}|\bar{R},\vec{q})\) = \(\frac{n_{i}-V_{i}}{N-V}\);
</p>
</li>
</ul>
<p>
Spesso si aggiungono degli offset per evitare divisioni per 0,
per esempio:
</p>
\begin{equation}
P(k_{i}|R,\vec{q}) = \frac{V_{i}+0.5}{V+1};
\end{equation}

<p>

<div class="row top-buffer"> </div>
<img src="./bim5.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>


<div class="row top-buffer"> </div>
<img src="./bim6.png"class="img-responsive"style="display: block; margin-left: auto; margin-right: auto;">
<div class="row top-buffer"> </div>

</p>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->


<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><div id="outline-container-sec-5" class="outline-2"><button type="button" class="collapsible">
<h2 id="sec-5" style="text-decoration: underline"> 5 Vantaggi e Svantaggi &triangledown;</h2>
</button><div class='sec-5 collapsible-content'>
<p>
Il concetto stesso di "probabilit√† di essere rilevante" √®
molto utile, e questo modello ne √® un'implementazione chiara ed
efficiente.
Dall'altro lato, come al solito si considerano i termini <b>indipendenti</b>, senza
guardare alla semantica dei contenuti.
I pesi binari poi <b>non considerano la frequenza con cui un termine compare all'interno di un documento</b>.
E' per questo che i BIM sono utili su corpus ristretti o in ambiti specifici.
Un'altra variabile che influenza molto il ranking √® il guess iniziale sul pool di documenti
rilevanti, il quale pu√≤ spostare di molto il ranking finale.
</p>

<p>
Tendenzialmente il <i>vector model</i> performa meglio del <i>BIM</i> probabilistico su corpus
di documenti di natura generale.
</p>
</div>
</div>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->

<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>

<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><hr style="border: 1px solid #FFFFFF" />   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row">
   <div class="col-xs-1"></div>
   <div class="col-xs-10"><footer id="postamble">
<div>
<p class="author"><b>Author</b>: Matteo Lugli üêÉ</p><p class="email"><b>Email</b>: <a href="mailto:matteolugli18@gmail.com">matteolugli18@gmail.com</a></p><p class="date"><b>Created</b>: 2023-06-13 mar 16:07</p>
</div>
</footer>
   </div>
   <div class="col-xs-1"></div>
</div> <!-- end row -->
<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>

<div class="row top-buffer"> </div>
<script>

      function set_sections() {
	// -- Deal with the hiding/showing of the various sections
	var buttons = document.getElementsByClassName('collapsible');

	for (var i = 0; i < buttons.length; i++) {
	  buttons[i].addEventListener('click', function() {
	    var content = this.parentElement;
	    divs = content.getElementsByTagName('div');
	    for (var j = 0; j < divs.length; j++) {
	      if (divs[j].style.display === '' || divs[j].style.display === 'block') {
		divs[j].style.display = 'none';
	      } else {
		divs[j].style.display = 'block';
	      }
	    }
	  });
	}
      }

      function hide_sections() {
	// -- Deal with the hiding/showing of the various sections
	var buttons = document.getElementsByClassName('collapsible');
	var sections_to_not_hide = ['Lecture Info', 'Overview', 'Basic Info', 'Informazioni Lezione', 'Table of Contents', 'Informazioni', 'Lecture Summary']

	for (var i = 0; i < buttons.length; i++) {
	  // -- Check which sections to hide initially
	  html_elem = buttons[i].getElementsByTagName('h2').length > 0 ?
	    buttons[i].getElementsByTagName('h2')[0] :
	    buttons[i].getElementsByTagName('h3').length > 0 ?
	    buttons[i].getElementsByTagName('h3')[0] :
	    buttons[i].getElementsByTagName('h4')[0];

	  var hide_section = true;

	  for (var h = 0; h < sections_to_not_hide.length; h++) {
	    if (html_elem.innerHTML.includes(sections_to_not_hide[h])) {
	      hide_section = false;
	    }
	  }

	  if (hide_section) {
	    divs = buttons[i].parentElement.getElementsByTagName('div');

	    for (var j = 0; j < divs.length; j++) {
	      divs[j].style.display =
		divs[j].style.display === '' || divs[j].style.display === 'block' ?
		divs[j].style.display = 'none' :
		divs[j].style.display = 'block';
	    }
	  }    
	}
      }

      // ---------------------------

      // function to set a given theme/color-scheme
      function setTheme(themeName) {
        localStorage.setItem('theme', themeName);
        document.documentElement.className = themeName;
      }

      // function to toggle between light and dark theme
      function toggleTheme() {
        if (localStorage.getItem('theme') === 'theme-dark') {
          setTheme('theme-light');
        } else {
          setTheme('theme-dark');
        }
      }

      // Immediately invoked function to set the theme on initial load
      (function () {
        if (localStorage.getItem('theme') === 'theme-light') {
          setTheme('theme-light');
        } else {
          setTheme('theme-dark');
        }
      })();
      

      // ---------------------------

      // toggle menu
      var menu_off = 1
      
      function toggleMenu() {
	let menu = document.querySelector('.side-menu');
	let menu_list = document.querySelector('.side-menu-content');
	let toggle = document.querySelector('.toggle');

	let inactive_color = getComputedStyle(document.body)
	    .getPropertyValue('--color-background');

	let active_color = getComputedStyle(document.body)
	    .getPropertyValue('--color-primary');	
		
	if (menu_off) {
	  // activate menu
	  toggle.style.backgroundColor = active_color;
	  menu.style.width = '170px';
	  menu_list.style.display = 'block';
	  menu_off = 0;
	} else {
	  // de-activate menu
	  toggle.style.backgroundColor = inactive_color;
	  menu.style.width = '60px';	  
	  menu_list.style.display = 'none';
	  menu_off = 1;
	}
      }

set_sections();
hide_sections();
</script>
</div>
</body>
</html>
